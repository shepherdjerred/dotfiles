{{- /* Define OS-specific paths */ -}}
{{- $bunxCmd := "" -}}
{{- if eq .chezmoi.os "darwin" -}}
  {{- $bunxCmd = printf "%s/.local/share/mise/shims/bunx" .chezmoi.homeDir -}}
{{- else if eq .chezmoi.os "windows" -}}
  {{- $bunxCmd = "bunx" -}}
{{- end -}}
{
  "grafana": {
    "type": "stdio",
    "command": "go",
    "args": [
      "run",
      "github.com/grafana/mcp-grafana/cmd/mcp-grafana@latest",
      "--disable-oncall",
      "--disable-incident",
      "--disable-admin",
      "--disable-navigation",
      "--disable-pyroscope"
    ],
    "env": {
      "GRAFANA_URL": "https://grafana.tailnet-1a49.ts.net/",
      "GRAFANA_API_KEY": "{{ onepasswordRead "op://v64ocnykdqju4ui6j6pua56xw4/w5y6wldczvojkh3yxe5zadkpvi/password" }}"
    }
  },
  "pagerduty-mcp": {
    "type": "stdio",
    "command": "uvx",
    "args": ["pagerduty-mcp"],
    "env": {
      "PAGERDUTY_USER_API_KEY": "{{ onepasswordRead "op://v64ocnykdqju4ui6j6pua56xw4/yio3tx4wkvysvy5umdrqh7fe2e/password" }}"
    }
  },
  "github": {
    "type": "stdio",
    "command": {{ $bunxCmd | quote }},
    "args": ["-y", "@modelcontextprotocol/server-github"],
    "env": {
      "GITHUB_PERSONAL_ACCESS_TOKEN": "{{ onepasswordRead "op://v64ocnykdqju4ui6j6pua56xw4/kjzy27cw4ialemerahutnxis3a/password" }}"
    }
  },
  "sentry": {
    "type": "stdio",
    "command": {{ $bunxCmd | quote }},
    "args": ["-y", "@sentry/mcp-server"],
    "env": {
      "SENTRY_ACCESS_TOKEN": "{{ onepasswordRead "op://v64ocnykdqju4ui6j6pua56xw4/qguprvewkkqig7snxc4ffyqbwu/credential" }}"
    }
  },
  "playwright": {
    "type": "stdio",
    "command": {{ $bunxCmd | quote }},
    "args": ["-y", "@playwright/mcp"],
    "env": {}
  }
}
