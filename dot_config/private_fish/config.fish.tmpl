{{ if and (eq .chezmoi.arch "arm64") (eq .chezmoi.os "darwin") }}
  fish_add_path (brew --prefix)/bin
{{ else }}
  fish_add_path $HOME/bin
{{ end }}

fish_add_path $HOME/.local/bin
fish_add_path $HOME/.bin

set -gx GPG_TTY (tty)

if status is-interactive
    # Bring interactive shells into the future
    if type -q lvim
      alias vim lvim
      set -gx EDITOR lvim
    else if type -q nvim
      alias vim nvim
      set -gx EDITOR nvim
    else
      set -gx EDITOR vim
    end

    if type -q exa
      alias ls exa
      alias l exa
    end
    alias nmake "make -f (git rev-parse --show-toplevel)/scripts/makefiles/Makefile"

    # Force brew binaries
    {{ if and (eq .chezmoi.arch "arm64") (eq .chezmoi.os "darwin") }}
      alias pipenv (brew --prefix)/bin/pipenv
      alias aws (brew --prefix)/bin/aws
    {{ end }}

    {{ if eq .chezmoi.os "darwin" -}}
      alias finder "open -a Finder"
    {{ end }}

    fish_vi_key_bindings
    set sponge_purge_only_on_exit true

    __abbr_tips_init

    starship init fish | source
end

{{ if and (eq .chezmoi.arch "arm64") (eq .chezmoi.os "darwin") }}
  source (brew --prefix)/opt/asdf/libexec/asdf.fish
{{ else }}
  source $HOME/.asdf/asdf.fish
{{ end }}
